{% if week > 0 %}
<div id="record">
  <div class="record" data-bind="if: record">
    Prediction record: <span data-bind="text: record.correct"></span> - <span
    data-bind="text: record.wrong"></span>
  </div>
  <p></p>
  <p></p>
</div>
{% endif %}

<div id="predictions">

  <div class="predictions" data-bind="if: predictions && predictions.length">

    <h3>Predicting upcoming games</h3>
    <table class="table">
      <tbody>
        <tr data-bind="foreach: predictions">
          <td data-bind="if: !$index()"></td>
          <td><img data-bind="attr: {src: '{{basepath}}img/' + at + '.svg'}"></img></td>
        </tr>
        <tr data-bind="foreach: predictions">
          <td data-bind="if: !$index()"></td>
          <td>@</td>
        </tr>
        <tr class="separation" data-bind="foreach: predictions">
          <td data-bind="if: !$index()"></td>
            <td><img data-bind="attr: {src: '{{basepath}}img/' + ht + '.svg'}"></img></td>
        </tr>
        <tr class="separation results" data-bind="foreach: predictions">
          <td data-bind="if: !$index()">Winner</td>
          <td>
            <img class="winner" data-bind="attr: {src: '{{basepath}}img/' + ot + '.svg'}"></img>
            <div data-bind="text: o.toFixed(0) + '%'"></div>
          </td>
        </tr>
        <tr class="results" data-bind="foreach: predictions">
          <td data-bind="if: !$index()">Rate</td>
          <td>
            <img data-bind="attr: {src: '{{basepath}}img/' + wt + '.svg'}"></img>
            <div data-bind="text: w.toFixed(1)"></div>
          </td>
        </tr>
        <tr data-bind="foreach: predictions">
          <td data-bind="if: !$index()">Points</td>
          <td>
            <img data-bind="attr: {src: '{{basepath}}img/' + pt + '.svg'}"></img>
            <div data-bind="text: p.toFixed(0)"></div>
          </td>
        </tr>
        <tr data-bind="foreach: predictions">
          <td data-bind="if: !$index()">Yards</td>
          <td>
            <img data-bind="attr: {src: '{{basepath}}img/' + yt + '.svg'}"></img>
            <div data-bind="text: y.toFixed(0)"></div>
          </td>
        </tr>
        <tr data-bind="foreach: predictions">
          <td data-bind="if: !$index()">Turnovers</td>
          <td>
            <img data-bind="attr: {src: '{{basepath}}img/' + tt + '.svg'}"></img>
            <div data-bind="text: t.toFixed(1)"></div>
          </td>
        </tr>

      </tbody>
    </table>
    <div class="explanations">Positive numbers indicates advantage for home team.</div>
    <br>

  </div>

</div>

{% if week < 21 %}

<h1>Strength of remaining schedule</h1>

<svg id="sosRemain">
</svg>
<p>
</p>

{% endif %}


<script type="text/javascript">
  var season = {{season}};
  var week = {{week}};
  if (week == 0) {
    season -= 1;
    week = 21;
  }
  var keystats = '_' + season + (week < 10 ? '0' : '') + week;
  var data = hf.stats.data[keystats];
  var predictions = data.predictions.nextweek;
  var record = data.predictions.record;
  ko.applyBindings(predictions, document.getElementById('predictions'));
  if ({{week}} > 0) {
    ko.applyBindings(record, document.getElementById('record'));
  }

  if ({{week}} < 21) {

    var sosRemainGraph = new hf.graphs.Bar('#sosRemain');
    var sosRemainset = new hf.stats.Set(season, week, 'ssoh');
    sosRemainGraph.create(sosRemainset, '{{basepath}}');
  }



</script>

